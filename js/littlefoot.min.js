!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).littlefoot=t()}(function(){var t=function(e){var n;return function(t){return n||e(n={exports:{},parent:t},n.exports),n.exports}},h=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bindContentScrollHandler=function(t){var e=(0,u.default)(n);(0,b.bind)(t,"mousewheel",e),(0,b.bind)(t,"wheel",e)},e.bindEvents=function(t){var e,n=t.toggle,o=t.dismiss,r=t.reposition,i=t.resize,a=t.hover,c=t.unhover;(0,b.bind)(document,"touchend",s(n)),(0,b.bind)(document,"click",s(n)),(0,b.bind)(document,"keyup",(e=function(){return(0,f.forAllActiveFootnotes)(o)},function(t){return 27===t.keyCode&&e()})),(0,b.bind)(document,"gestureend",(0,u.default)(r)),(0,b.bind)(window,"scroll",(0,u.default)(r)),(0,b.bind)(window,"resize",(0,u.default)(i)),(0,l.default)(document).on("mouseover",".".concat(S.CLASS_BUTTON),s(a,!0)),(0,l.default)(document).on("mouseout",".".concat(S.CLASS_HOVERED),s(c,!0))};var i=O(g),l=O(c),u=O(p),f=o({});function s(r){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return function(t){var e=t.target||t.srcElement,n=(0,f.findClosestFootnote)(e),o=(0,f.findClosestPopover)(e);r(n,o),i&&t.preventDefault()}}function n(t){var e=t.currentTarget,n="wheel"===t.type?-t.deltaY:t.wheelDelta,o=e.clientHeight,r=(0,f.findClosestPopover)(e);if(n<=0&&n<o+e.scrollTop-e.scrollHeight)return(0,i.default)(r).add(S.CLASS_FULLY_SCROLLED),e.scrollTop=e.scrollHeight,t.stopPropagation(),void t.preventDefault();0<n&&((0,i.default)(r).remove(S.CLASS_FULLY_SCROLLED),e.scrollTop<n&&(e.scrollTop=0,t.stopPropagation(),t.preventDefault()))}}),o=t(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findFootnote=function(t){return v({button:i(S.CLASS_BUTTON,t)})},e.findAllFootnotes=function(t){return a(S.CLASS_BUTTON,t).map(function(t){return v({button:t})})},e.forAllActiveFootnotes=l,e.forOtherActiveFootnotes=function(t,e){return l(t,":not([".concat(S.FOOTNOTE_ID,'="').concat(e.getId(),'"])'))},e.findClosestFootnote=function(t){var e=(0,o.default)(t,".".concat(S.CLASS_BUTTON));return v({button:e,popover:c(S.CLASS_FOOTNOTE,e)})},e.hasHoveredFootnotes=function(){return!!document.querySelector(".".concat(S.CLASS_BUTTON,":hover, .").concat(S.CLASS_FOOTNOTE,":hover"))},e.findClosestPopover=void 0;var n=O(y),u=O(g),o=O(m),r=O(C),f=O(X),s=h({});function d(t,e){for(var n=arguments.length,o=new Array(2<n?n-2:0),r=2;r<n;r++)o[r-2]=arguments[r];return"function"==typeof t&&t.call.apply(t,[e].concat(o))}function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return document.querySelector("".concat(e,".").concat(t))}function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return(0,n.default)(document.querySelectorAll("".concat(e,".").concat(t)))}function p(t){return t.querySelector(".".concat(S.CLASS_CONTENT))}function v(t){var l=t.button,i=t.popover;return l&&{getId:function(){return l.getAttribute(S.FOOTNOTE_ID)},activate:function(t,e,n){d(l.blur,l),l.setAttribute("aria-expanded","true"),(0,u.default)(l).add(S.CLASS_ACTIVE);var o=(0,f.default)(t);l.insertAdjacentHTML("afterend",o({content:l.getAttribute(S.FOOTNOTE_CONTENT),id:l.getAttribute(S.FOOTNOTE_ID),number:l.getAttribute(S.FOOTNOTE_NUMBER)}));var r=l.nextElementSibling,i=p(r),a,c;return r.setAttribute(S.FOOTNOTE_MAX_HEIGHT,(0,b.getMaxHeight)(i)),r.style.maxWidth=document.body.clientWidth+"px",(0,s.bindContentScrollHandler)(i),a=r,(c=e)&&(0,u.default)(a).add(c),d(n,null,r,l),v({button:l,popover:r})},dismiss:function(){d(l.blur,l),l.setAttribute("aria-expanded","false"),(0,u.default)(l).remove(S.CLASS_ACTIVE),(0,u.default)(l).remove(S.CLASS_HOVERED)},hover:function(){return(0,u.default)(l).add(S.CLASS_HOVERED)},isActive:function(){return(0,u.default)(l).contains(S.CLASS_ACTIVE)},isChanging:function(){return(0,u.default)(l).contains(S.CLASS_CHANGING)},ready:function(){return(0,u.default)(i).add(S.CLASS_ACTIVE)},remove:function(){return i.parentNode.removeChild(i)},reposition:function(){var t=(0,b.getAvailableRoom)(l),e=p(i),n=(0,L.getPopoverMaxHeight)(i,t);e.style.maxHeight=n+"px",(0,L.repositionPopover)(i,t),parseFloat(i.offsetHeight)<=e.scrollHeight&&(0,u.default)(i).add(S.CLASS_SCROLLABLE)},resize:function(){var t=(0,b.getAvailableRoom)(l),e=p(i).offsetWidth,n=parseInt((0,b.getStyle)(l,"marginLeft"),10),o=-t.leftRelative*e+n+l.offsetWidth/2,r=i.querySelector(".".concat(S.CLASS_WRAPPER));i.style.left=o+"px",r.style.maxWidth=e+"px",(0,L.repositionTooltip)(i,t.leftRelative)},startChanging:function(){return(0,u.default)(l).add(S.CLASS_CHANGING)},stopChanging:function(){return(0,u.default)(l).remove(S.CLASS_CHANGING)}}}function c(t,e){return e&&(0,r.default)(e,".".concat(t))[0]}function l(n,t){return a(S.CLASS_FOOTNOTE,t).map(function(t){var e=c(S.CLASS_BUTTON,t);return n(v({button:e,popover:t}))})}e.findClosestPopover=function(t){return(0,o.default)(t,".".concat(S.CLASS_FOOTNOTE))}}),O=function(t){return t&&t.__esModule?t:{default:t}},g={};function e(t){if(!t||1!==t.nodeType)throw new Error("A DOM Element reference is required");this.el=t,this.classList=t.classList}function a(t,e){if(e=e||"a method","string"!=typeof t)throw new TypeError("Failed to execute '"+e+"' on 'ClassList': the token provided ('"+t+"') is not a string.");if(""===t)throw new SyntaxError("Failed to execute '"+e+"' on 'ClassList': the token provided must not be empty.");if(/\s/.test(t))throw new Error("Failed to execute '"+e+"' on 'ClassList': the token provided ('"+t+"') contains HTML space characters, which are not valid in tokens.")}g=function(t){return new e(t)},e.prototype.toArray=function(){var t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(/\s+/);return""===t[0]&&t.shift(),t},e.prototype.add=function(t){var e;a(t,"add"),this.classList?this.classList.add(t):-1===(e=this.toArray()).indexOf(t)&&(e.push(t),this.el.setAttribute("class",e.join(" ")))},e.prototype.contains=function(t){return a(t,"contains"),this.classList?this.classList.contains(t):-1<this.toArray().indexOf(t)},e.prototype.remove=function(t){var e,n,o,r,i;if("[object RegExp]"==Object.prototype.toString.call(t))for(o=0,i=(e=this.toArray()).length;o<i;o++)t.test(e[o])&&this.remove(e[o]);else a(t,"remove"),this.classList?this.classList.remove(t):-1<(r=(n=this.toArray()).indexOf(t))&&(n.splice(r,1),this.el.setAttribute("class",n.join(" ")))},e.prototype.toggle=function(t,e){a(t,"toggle");var n=this.contains(t),o=n?!0!==e&&"remove":!1!==e&&"add";return o&&this[o](t),"boolean"==typeof e?e:!n};var n={};function r(t){this.listenerMap=[{},{}],t&&this.root(t),this.handle=r.prototype.handle.bind(this)}(n=r).prototype.root=function(t){var e,n=this.listenerMap;if(this.rootElement){for(e in n[1])n[1].hasOwnProperty(e)&&this.rootElement.removeEventListener(e,this.handle,!0);for(e in n[0])n[0].hasOwnProperty(e)&&this.rootElement.removeEventListener(e,this.handle,!1)}if(!t||!t.addEventListener)return this.rootElement&&delete this.rootElement,this;for(e in this.rootElement=t,n[1])n[1].hasOwnProperty(e)&&this.rootElement.addEventListener(e,this.handle,!0);for(e in n[0])n[0].hasOwnProperty(e)&&this.rootElement.addEventListener(e,this.handle,!1);return this},r.prototype.captureForType=function(t){return-1!==["blur","error","focus","load","resize","scroll"].indexOf(t)},r.prototype.on=function(t,e,n,o){var r,i,a,c;if(!t)throw new TypeError("Invalid event type: "+t);if("function"==typeof e&&(o=n,n=e,e=null),void 0===o&&(o=this.captureForType(t)),"function"!=typeof n)throw new TypeError("Handler must be a type of Function");return r=this.rootElement,(i=this.listenerMap[o?1:0])[t]||(r&&r.addEventListener(t,this.handle,o),i[t]=[]),a=e?/^[a-z]+$/i.test(e)?(c=e,u):/^#[a-z0-9\-_]+$/i.test(e)?(c=e.slice(1),f):(c=e,l):(c=null,function(t,e){return this.rootElement===window?e===document:this.rootElement===e}.bind(this)),i[t].push({selector:e,handler:n,matcher:a,matcherParam:c}),this},r.prototype.off=function(t,e,n,o){var r,i,a,c,l;if("function"==typeof e&&(o=n,n=e,e=null),void 0===o)return this.off(t,e,n,!0),this.off(t,e,n,!1),this;if(a=this.listenerMap[o?1:0],!t){for(l in a)a.hasOwnProperty(l)&&this.off(l,e,n);return this}if(!(c=a[t])||!c.length)return this;for(r=c.length-1;0<=r;r--)i=c[r],e&&e!==i.selector||n&&n!==i.handler||c.splice(r,1);return c.length||(delete a[t],this.rootElement&&this.rootElement.removeEventListener(t,this.handle,o)),this},r.prototype.handle=function(t){var e,n,o,r,i,a,c=t.type,l=[];if(!0!==t.ftLabsDelegateIgnore){switch(3===(a=t.target).nodeType&&(a=a.parentNode),o=this.rootElement,t.eventPhase||(t.target!==t.currentTarget?3:2)){case 1:l=this.listenerMap[1][c];break;case 2:this.listenerMap[0]&&this.listenerMap[0][c]&&(l=l.concat(this.listenerMap[0][c])),this.listenerMap[1]&&this.listenerMap[1][c]&&(l=l.concat(this.listenerMap[1][c]));break;case 3:l=this.listenerMap[0][c]}for(n=l.length;a&&n;){for(e=0;e<n&&(r=l[e]);e++)if(r.matcher.call(a,r.matcherParam,a)&&(i=this.fire(t,a,r)),!1===i)return t.ftLabsDelegateIgnore=!0,void t.preventDefault();if(a===o)break;n=l.length,a=a.parentElement}}},r.prototype.fire=function(t,e,n){return n.handler.call(e,t,e)};var l=function(t){if(t){var e=t.prototype;return e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector}}(Element);function u(t,e){return t.toLowerCase()===e.tagName.toLowerCase()}function f(t,e){return t===e.id}r.prototype.destroy=function(){this.off(),this.root()};var c={};(c=function(t){return new n(t)}).Delegate=n;var p={};(function(t){var S="Expected a function",i=NaN,a="[object Symbol]",c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,s=parseInt,e="object"==typeof t&&t&&t.Object===Object&&t,n="object"==typeof self&&self&&self.Object===Object&&self,o=e||n||Function("return this")(),d=Object.prototype.toString,y=Math.max,b=Math.min,m=function(){return o.Date.now()};function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function T(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||(n=e)&&"object"==typeof n&&d.call(e)==a)return i;var e,n;if(_(t)){var o="function"==typeof t.valueOf?t.valueOf():t;t=_(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var r=u.test(t);return r||f.test(t)?s(t.slice(2),r?2:8):l.test(t)?i:+t}p=function(t,e,n){var o=!0,r=!0;if("function"!=typeof t)throw new TypeError(S);return _(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),function(o,r,t){var i,a,c,l,u,f,s=0,d=!1,p=!1,e=!0;if("function"!=typeof o)throw new TypeError(S);function v(t){var e=i,n=a;return i=a=void 0,s=t,l=o.apply(n,e)}function h(t){var e=t-f;return void 0===f||r<=e||e<0||p&&c<=t-s}function O(){var t=m(),e,n;if(h(t))return g(t);u=setTimeout(O,(n=r-((e=t)-f),p?b(n,c-(e-s)):n))}function g(t){return u=void 0,e&&i?v(t):(i=a=void 0,l)}function n(){var t=m(),e=h(t),n;if(i=arguments,a=this,f=t,e){if(void 0===u)return s=n=f,u=setTimeout(O,r),d?v(n):l;if(p)return u=setTimeout(O,r),v(f)}return void 0===u&&(u=setTimeout(O,r)),l}return r=T(r)||0,_(t)&&(d=!!t.leading,c=(p="maxWait"in t)?y(T(t.maxWait)||0,r):c,e="trailing"in t?!!t.trailing:e),n.cancel=function(){void 0!==u&&clearTimeout(u),i=f=a=u=void(s=0)},n.flush=function(){return void 0===u?l:g(m())},n}(t,e,{leading:o,maxWait:e,trailing:r})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.POPOVER_POSITION=S.FOOTNOTE_REF=S.FOOTNOTE_NUMBER=S.FOOTNOTE_MAX_HEIGHT=S.FOOTNOTE_ID=S.FOOTNOTE_CONTENT=S.FOOTNOTE_BACKLINK_REF=S.CLASS_PROCESSED=S.CLASS_PRINT_ONLY=S.CLASS_WRAPPER=S.CLASS_TOOLTIP=S.CLASS_FOOTNOTE=S.CLASS_CONTENT=S.CLASS_BUTTON=S.CLASS_SCROLLABLE=S.CLASS_HOVERED=S.CLASS_FULLY_SCROLLED=S.CLASS_CHANGING=S.CLASS_ACTIVE=void 0,S.CLASS_ACTIVE="is-active",S.CLASS_CHANGING="is-changing",S.CLASS_FULLY_SCROLLED="is-fully-scrolled",S.CLASS_HOVERED="is-hovered",S.CLASS_SCROLLABLE="is-scrollable",S.CLASS_BUTTON="littlefoot-footnote__button",S.CLASS_CONTENT="littlefoot-footnote__content",S.CLASS_FOOTNOTE="littlefoot-footnote",S.CLASS_TOOLTIP="littlefoot-footnote__tooltip",S.CLASS_WRAPPER="littlefoot-footnote__wrapper",S.CLASS_PRINT_ONLY="footnote-print-only",S.CLASS_PROCESSED="footnote-processed",S.FOOTNOTE_BACKLINK_REF="data-footnote-backlink-ref",S.FOOTNOTE_CONTENT="data-footnote-content",S.FOOTNOTE_ID="data-footnote-id",S.FOOTNOTE_MAX_HEIGHT="data-footnote-max-height",S.FOOTNOTE_NUMBER="data-footnote-number",S.FOOTNOTE_REF="data-footnote-ref",S.POPOVER_POSITION="data-footnote-position";var y=function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()},i=function(t,e){var n=window.Element.prototype,o=n.matches||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;if(!t||1!==t.nodeType)return!1;var r=t.parentNode;if(o)return o.call(t,e);for(var i=r.querySelectorAll(e),a=i.length,c=0;c<a;c++)if(i[c]===t)return!0;return!1},b={};Object.defineProperty(b,"__esModule",{value:!0}),b.bind=function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=window.addEventListener?"addEventListener":"attachEvent",i="addEventListener"!==r?"on":"";t[r](i+e,n,o)},b.children=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return(0,s.default)(t.children).filter(function(t){return 8!==t.nodeType&&(!e||(0,d.default)(t,e))})},b.getStyle=v,b.getMaxHeight=function(t){var e=v(t,"maxHeight"),n=parseFloat(e);return null==e||"none"===e?t.clientHeight:/%/.test(e)?Math.round(n/100*document.body.clientHeight):Math.round(n)},b.getAvailableRoom=function(t){var e=parseFloat(v(t,"marginLeft")),n=parseFloat(t.offsetWidth)-e,o=parseFloat(t.offsetHeight),r=t.getBoundingClientRect(),i=r.left+n/2,a=r.top+o/2;return{top:a,bottom:window.innerHeight-a,leftRelative:i/window.innerWidth}};var s=O(y),d=O(i);function v(t,e){var n=t.ownerDocument.defaultView||window,o=n.getComputedStyle?n.getComputedStyle(t):t.currentStyle;return o.getPropertyValue(e)||o[e]||""}var m=function(t,e,n){for(n=n||document,t={parentNode:t};(t=t.parentNode)&&t!==n;)if(i(t,e))return t},_=Element.prototype,T=_.matches||_.mozMatchesSelector||_.msMatchesSelector||_.oMatchesSelector||_.webkitMatchesSelector,A=!!T&&T.call(document.createElement("a"),"a"),E=function(t,e){if(!t||1!==t.nodeType)return!1;var n=t.parentNode;if(n||A||(n=document.createDocumentFragment()).appendChild(t),T)return T.call(t,e);for(var o=n.querySelectorAll(e),r=o.length,i=0;i<r;i++)if(o[i]===t)return!0;return!1},C=function(t,e){for(var n=t.parentNode.firstChild,o=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&(e?E(n,e)&&o.push(n):o.push(n));return o},Y=/<%=([\s\S]+?)%>/g,K={};(function(t){var e,n=/[&<>"'`]/g,o=RegExp(n.source),r="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")(),c=(e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(t){return null==e?void 0:e[t]}),l=Object.prototype.toString,u=a.Symbol,f=u?u.prototype:void 0,s=f?f.toString:void 0;K={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:Y,variable:"",imports:{_:{escape:function(t){return(t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if("symbol"==typeof(e=t)||(n=e)&&"object"==typeof n&&"[object Symbol]"==l.call(e))return s?s.call(t):"";var e,n,o=t+"";return"0"==o&&1/t==-1/0?"-0":o}(e))&&o.test(t)?t.replace(n,c):t;var e}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var X={};(function(t){var b=1/0,r=9007199254740991,l="[object Arguments]",e="[object Error]",i="[object Function]",a="[object GeneratorFunction]",m="[object Symbol]",_=/\b__p \+= '';/g,T=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,E=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,n=/^(?:0|[1-9]\d*)$/,C=/($^)/,L=/['\n\r\u2028\u2029\\]/g,o={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},c="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,f=c||u||Function("return this")();function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function N(t){return"\\"+o[t]}var d,p,v=Object.prototype,w=v.hasOwnProperty,F=v.toString,h=f.Symbol,O=v.propertyIsEnumerable,j=(d=Object.keys,p=Object,function(t){return d(p(t))}),g=Math.max,S=h?h.prototype:void 0,P=S?S.toString:void 0;function M(t,e){var n=U(t)||G(a=i=t)&&B(a)&&w.call(i,"callee")&&(!O.call(i,"callee")||F.call(i)==l)?function(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}(t.length,String):[],o=n.length,r=!!o,i,a;for(var c in t)!e&&!w.call(t,c)||r&&("length"==c||x(c,o))||n.push(c);return n}function R(t,e,n,o){return void 0===t||k(t,v[n])&&!w.call(o,n)?e:t}function y(t,e,n){var o=t[e];w.call(t,e)&&k(o,n)&&(void 0!==n||e in t)||(t[e]=n)}function I(i,a){return a=g(void 0===a?i.length-1:a,0),function(){for(var t=arguments,e=-1,n=g(t.length-a,0),o=Array(n);++e<n;)o[e]=t[a+e];e=-1;for(var r=Array(a+1);++e<a;)r[e]=t[e];return r[a]=o,s(i,this,r)}}function x(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||n.test(t))&&-1<t&&t%1==0&&t<e}function D(t,e,n){if(!q(n))return!1;var o=typeof e;return!!("number"==o?B(n)&&x(e,n.length):"string"==o&&e in n)&&k(n[e],t)}function H(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||v)}function k(t,e){return t===e||t!=t&&e!=e}var U=Array.isArray;function B(t){return null!=t&&("number"==typeof(o=t.length)&&-1<o&&o%1==0&&o<=r)&&!((n=q(e=t)?F.call(e):"")==i||n==a);var e,n,o}function V(t){return!!G(t)&&(F.call(t)==e||"string"==typeof t.message&&"string"==typeof t.name)}function q(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function G(t){return!!t&&"object"==typeof t}var W,$=(W=function(t,e,n,o){var r;!function(t,e,n,o){n||(n={});for(var r=-1,i=e.length;++r<i;){var a=e[r],c=o?o(n[a],t[a],a,n,t):void 0;y(n,a,void 0===c?t[a]:c)}}(e,B(r=e)?M(r,!0):function(t){if(!q(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=H(t),n=[];for(var o in t)("constructor"!=o||!e&&w.call(t,o))&&n.push(o);return n}(r),t,o)},I(function(t,e){var n=-1,o=e.length,r=1<o?e[o-1]:void 0,i=2<o?e[2]:void 0;for(r=3<W.length&&"function"==typeof r?(o--,r):void 0,i&&D(e[0],e[1],i)&&(r=o<3?void 0:r,o=1),t=Object(t);++n<o;){var a=e[n];a&&W(t,a,0,r)}return t})),z=I(function(t,e){try{return s(t,void 0,e)}catch(t){return V(t)?t:new Error(t)}});X=function(a,t,e){var n,o=K.imports._.templateSettings||K;e&&D(a,t,e)&&(t=void 0),a=null==(n=a)?"":function(t){if("string"==typeof t)return t;if("symbol"==typeof(e=t)||G(e)&&F.call(e)==m)return P?P.call(t):"";var e,n=t+"";return"0"==n&&1/t==-b?"-0":n}(n),t=$({},t,o,R);var c,l,r,i=$({},t.imports,o.imports,R),u=B(r=i)?M(r):function(t){if(!H(t))return j(t);var e=[];for(var n in Object(t))w.call(t,n)&&"constructor"!=n&&e.push(n);return e}(r),f=(O=i,function(t,e){for(var n=-1,o=t?t.length:0,r=Array(o);++n<o;)r[n]=(i=t[n],O[i]);var i;return r}(g=u)),s=0,d=t.interpolate||C,p="__p += '",v=RegExp((t.escape||C).source+"|"+d.source+"|"+(d===Y?E:C).source+"|"+(t.evaluate||C).source+"|$","g"),h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"",O,g;a.replace(v,function(t,e,n,o,r,i){return n||(n=o),p+=a.slice(s,i).replace(L,N),e&&(c=!0,p+="' +\n__e("+e+") +\n'"),r&&(l=!0,p+="';\n"+r+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),s=i+t.length,t}),p+="';\n";var S=t.variable;S||(p="with (obj) {\n"+p+"\n}\n"),p=(l?p.replace(_,""):p).replace(T,"$1").replace(A,"$1;"),p="function("+(S||"obj")+") {\n"+(S?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(c?", __e = _.escape":"")+(l?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var y=z(function(){return Function(u,h+"return "+p).apply(void 0,f)});if(y.source=p,V(y))throw y;return y}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var L={};Object.defineProperty(L,"__esModule",{value:!0}),L.getPopoverMaxHeight=function(t,e){var n=P(t,e),o=parseInt(t.getAttribute(S.FOOTNOTE_MAX_HEIGHT),10),r=parseInt((0,b.getStyle)(t,"marginTop"),10),i=e[n?j:F]-r-15;return Math.min(o,i)},L.repositionPopover=function(t,e){var n=P(t,e),o=t.getAttribute(S.POPOVER_POSITION)||F,r=n?j:F;o!==r&&((0,N.default)(t).remove("".concat(w).concat(o)),(0,N.default)(t).add("".concat(w).concat(r)),t.setAttribute(S.POPOVER_POSITION,r),t.style.transformOrigin="".concat(100*e.leftRelative,"% ").concat(n?"100%":"0"))},L.repositionTooltip=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.5,n=t.querySelector(".".concat(S.CLASS_TOOLTIP));n&&(n.style.left=100*e+"%")};var N=O(g),w="is-positioned-",F="bottom",j="top";function P(t,e){var n=2*parseInt((0,b.getStyle)(t,"marginTop"),10)+t.offsetHeight;return e.bottom<n&&e.bottom<e.top}var M={};(function(t){var e,r=1/0,i="[object Symbol]",n=/[&<>"'`]/g,o=RegExp(n.source),a="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,l=a||c||Function("return this")(),u=(e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(t){return null==e?void 0:e[t]}),f=Object.prototype.toString,s=l.Symbol,d=s?s.prototype:void 0,p=d?d.toString:void 0;M=function(t){var e;return(t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if("symbol"==typeof(e=t)||(n=e)&&"object"==typeof n&&f.call(e)==i)return p?p.call(t):"";var e,n,o=t+"";return"0"==o&&1/t==-r?"-0":o}(e))&&o.test(t)?t.replace(n,u):t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.createDocumentAdapter=function(t){var e,n=t.allowDuplicates,o=t.anchorParentSelector,r=t.anchorPattern,i=t.buttonTemplate,a=t.footnoteParentClass,c=t.footnoteSelector,l=t.numberResetSelector,u=t.scope,f=parseInt((e=document.querySelectorAll("[".concat(S.FOOTNOTE_ID,"]"))).length&&e[e.length-1].getAttribute(S.FOOTNOTE_ID),10)+1,s,d,p,v;return Q({anchorPattern:r,anchorParentSelector:o,footnoteParentClass:a,scope:u}).map((p=n,v=c,function(t){var e=W(t).replace(/[:.+~*\[\]]/g,"\\$&"),n="".concat(e,":not(.").concat(S.CLASS_PROCESSED,")"),o=document.querySelector(p?e:n),r=(0,D.default)(o,v);return G(r),{element:r,link:t}})).filter(function(t){return t.element}).map((d=f,function(t,e){var n=t.element,o=t.link,r=d+e,i=d+e,a=z(o),c,l,u,f,s;return{content:(0,H.default)((c=n.innerHTML,u=a.trim().replace(/\s+/g,"|"),f=new RegExp("(\\s|&nbsp;)*<\\s*a[^#<]*#("+u+")[^>]*>(.*?)<\\s*/\\s*a>","g"),s=c.trim().replace(f,"").replace("[]",""),0!==s.indexOf("<")&&(s="<p>"+s+"</p>"),s)),element:n,id:i,link:o,number:r,reference:a}})).map(l?(s=l,function(t,e,n){var o=(0,D.default)(t.link,s),r=e?n[e-1]:{reset:null,number:0};return Object.assign(t,{reset:r.reset,number:o===r.reset?r.number+1:1})}):function(t){return t}).map(function(t){var e,n;Z(t.link,(0,k.default)(i)(t)),e=t.element,n=t.link,[e,n].forEach(q),function t(e){var n=(0,b.children)(e,":not(.".concat(S.CLASS_PRINT_ONLY,")")),o=n.filter(function(t){return"HR"===t.tagName});n.length===o.length&&((0,I.default)(o).concat([e]).forEach(q),t(e.parentNode))}(e.parentNode)}),U};var I=O(y),x=O(g),D=O(m),H=O(M),k=O(X),U=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};o.get||o.set?Object.defineProperty(e,n,o):e[n]=t[n]}return e.default=t,e}(o({}));function B(e){return function(t){return t.getAttribute(e)}}function V(n){return function(t,e){return t.setAttribute(n,e)}}var q=function(t){return t&&(0,x.default)(t).add(S.CLASS_PRINT_ONLY)},G=function(t){return t&&(0,x.default)(t).add(S.CLASS_PROCESSED)},W=B(S.FOOTNOTE_REF),$=V(S.FOOTNOTE_REF),z=B(S.FOOTNOTE_BACKLINK_REF),J=V(S.FOOTNOTE_BACKLINK_REF);function Q(t){var o=t.anchorPattern,a=t.anchorParentSelector,r=t.footnoteParentClass,e=t.scope,n="".concat(e||"",' a[href*="#"]').trim();return(0,I.default)(document.querySelectorAll(n)).filter(function(t){var e=t.getAttribute("href"),n=t.getAttribute("rel");return"".concat(e).concat(null!=n&&"null"!==n?n:"").match(o)&&!(0,D.default)(t,'[class*="'.concat(r,'"]:not(a):not(').concat(a,")"))}).map(function(t){return o=function(t,e){var n=(0,D.default)(t,e);if(n)return n.id;var o=t.querySelector(e);return o?o.id:""}(e=t,n=a)||"",r=e.id||"",i="#"+e.getAttribute("href").split("#")[1],$(e,i),J(e,"".concat(o).concat(r)),e;var e,n,o,r,i})}function Z(t,e){t.insertAdjacentHTML("beforebegin",e)}var tt={};Object.defineProperty(tt,"__esModule",{value:!0}),tt.createCore=function(o,r){var i=(c=o,l=r,function(t,e){var n=l.activateCallback,o=l.activateDelay,r=l.contentTemplate;if(!t.isChanging()){t.startChanging();var i=t.activate(r,e,n);c.forAllActiveFootnotes(function(t){t.reposition(),t.resize()}),setTimeout(function(){i.ready(),i.stopChanging()},o)}}),a=(n=r,function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.dismissDelay;t.isChanging()||(t.startChanging(),t.dismiss(),setTimeout(function(){t.remove(),t.stopChanging()},e))}),n,c,l;return{activate:i,dismiss:a,reposition:function(){o.forAllActiveFootnotes(function(t){return t.reposition()})},resize:function(){o.forAllActiveFootnotes(function(t){return t.resize()})},toggle:function(t,e){var n=r.allowMultiple;t?t.isActive()?a(t):(n||o.forOtherActiveFootnotes(a,t),i(t)):e||o.forAllActiveFootnotes(a)},hover:function(t){var e=r.activateOnHover,n=r.allowMultiple;e&&!t.isActive()&&(n||o.forOtherActiveFootnotes(a,t),i(t),t.hover())},unhover:function(){var t=r.dismissOnUnhover,e=r.hoverDelay;t&&setTimeout(function(){o.hasHoveredFootnotes()||o.forAllActiveFootnotes(a)},e)}}};var et={};Object.defineProperty(et,"__esModule",{value:!0});var nt={activateCallback:null,activateDelay:100,activateOnHover:!(et.createSettings=function(t){return Object.assign({},nt,t)}),allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,footnoteParentClass:"footnote",footnoteSelector:"li",hoverDelay:250,numberResetSelector:null,scope:null,contentTemplate:'<aside class="'.concat(S.CLASS_FOOTNOTE,' is-positioned-bottom" id="fncontent:<%= id %>" ').concat(S.FOOTNOTE_ID,'="<%= id %>" ').concat(S.FOOTNOTE_NUMBER,'="<%= number %>" alt="Footnote <%= number %>"><div class="').concat(S.CLASS_WRAPPER,'"><div class="').concat(S.CLASS_CONTENT,'" tabindex="0"><%= content %></div></div><div class="').concat(S.CLASS_TOOLTIP,'"></div></aside>'),buttonTemplate:'<span class="littlefoot-footnote__container"><button class="'.concat(S.CLASS_BUTTON,' littlefoot-footnote__button__ellipsis" id="<%= reference %>" ').concat(S.FOOTNOTE_CONTENT,'="<%= content %>" ').concat(S.FOOTNOTE_ID,'="<%= id %>" ').concat(S.FOOTNOTE_NUMBER,'="<%= number %>" title="See Footnote <%= number %>" aria-controls="fncontent:<%= id %>" aria-expanded="false" aria-label="Footnote <%= number %>" rel="footnote"><svg viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button></span>')},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=ot.littlefoot=void 0;var rt=h({}),it=function(t){var o=(0,et.createSettings)(t),r=(0,R.createDocumentAdapter)(o),i=(0,tt.createCore)(r,o);return(0,rt.bindEvents)(i),{activate:function(t,e){var n=o.allowMultiple;if(t)return(n?r.findAllFootnotes(t):[r.findFootnote(t)]).filter(function(t){return t}).map(function(t){return i.activate(t,e)})},dismiss:function(t,e){r.forAllActiveFootnotes(function(t){return i.dismiss(t,e)},t)},getSetting:function(t){return o[t]},updateSetting:function(t,e){o[t]=e}}},at=ot.littlefoot=it;return ot.default=at,ot});
